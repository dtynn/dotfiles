set nocompatible
set number

filetype plugin indent on
syntax on

set autoindent             " Indent according to previous line.
set expandtab
set autoread
set noswapfile
set nowrap
set smarttab
set tabstop=4
set shiftwidth=4
set encoding=utf-8
set fileencodings=utf-8,chinese,latin-1

set completeopt=menu,menuone,preview,noselect,noinsert

set splitbelow
set splitright

set backspace=indent,eol,start
set hidden
set laststatus  =2
set display     =lastline

set showmode
set showcmd

set lazyredraw

" set incsearch


let g:rustfmt_autosave = 0
let g:completor_racer_binary = 'racer'

let g:ale_linters = {'rust': ['rls']}
let g:ale_rust_rls_toolchain = 'stable'
let g:ale_lint_on_text_changed = 'never'
let g:ale_fixers = {
\   '*': ['remove_trailing_lines', 'trim_whitespace'],
\   'rust': ['rustfmt'],
\}
let g:ale_fix_on_save = 1
let g:ale_close_preview_on_insert = 1

let g:nerdtree_tabs_open_on_console_startup=1

let g:snipMate = {}
let g:snipMate.no_default_aliases = 1

set wildignore+=*/target/*
let g:ctrlp_prompt_mappings = {
    \ 'AcceptSelection("e")': ['<c-t>'],
    \ 'AcceptSelection("t")': ['<cr>', '<2-LeftMouse>'],
    \ }


packloadall
silent! helptags ALL

nmap <silent> <C-k> <Plug>(ale_previous_wrap)
nmap <silent> <C-j> <Plug>(ale_next_wrap)
nnoremap nt :NERDTreeToggle<CR>
nnoremap nf :NERDTreeFocus<CR>


au FileType rust nmap gd <Plug>(rust-def-vertical)
au FileType rust nnoremap gh :ALEHover<CR>

au FocusGained,BufEnter,CursorHold,CursorHoldI * if mode() != 'c' | checktime | endif
