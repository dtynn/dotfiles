set nocompatible
set number

filetype plugin indent on
syntax on

colorscheme dark_plus

set autoindent             " Indent according to previous line.
set autoread
set noswapfile
set nowrap
set smarttab
set tabstop=4
set shiftwidth=4
set encoding=utf-8
set fileencodings=utf-8,chinese,latin-1
set cursorline
set completeopt=menu,menuone,preview,noselect,noinsert
set splitbelow
set splitright
set backspace=indent,eol,start
set hidden
set laststatus  =2
set display     =lastline
set showmode
set showcmd
set lazyredraw
set scrolloff=5

" set incsearch

let g:rustfmt_autosave = 0
let g:completor_racer_binary = 'racer'

let g:ale_rust_rls_toolchain = 'stable'
let g:ale_linters = {'rust': ['rls']}
let g:ale_lint_on_text_changed = 'never'
let g:ale_lint_on_enter = 1
let g:ale_fixers = {
\   '*': ['remove_trailing_lines', 'trim_whitespace'],
\   'rust': ['rustfmt'],
\}
let g:ale_fix_on_save = 1
let g:ale_close_preview_on_insert = 1

let g:nerdtree_tabs_open_on_console_startup=1

let g:airline#extensions#tabline#enabled = 1

set wildignore+=*/target/*
let g:ctrlp_prompt_mappings = {
    \ 'AcceptSelection("e")': ['<c-t>'],
    \ 'AcceptSelection("t")': ['<cr>', '<2-LeftMouse>'],
    \ }


packloadall
silent! helptags ALL

inoremap <silent> jj <ESC>
nnoremap <silent> ;; :update<CR>

nnoremap <silent> gvt :vert term<CR>

nmap <silent> <C-k> <Plug>(ale_previous_wrap)
nmap <silent> <C-j> <Plug>(ale_next_wrap)
nnoremap tt :NERDTreeToggle<CR>
nnoremap tf :NERDTreeFocus<CR>


au FileType rust nmap gdd :ALEGoToDefinitionInVSplit<CR>
au FileType rust nmap gdr <Plug>(rust-def-vertical)
au FileType rust nnoremap gh :ALEHover<CR>
au FileType rust nnoremap ga :ALEDetail<CR>
